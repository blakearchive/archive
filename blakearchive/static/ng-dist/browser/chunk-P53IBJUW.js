import{a as w,b as W,d as j,h as I}from"./chunk-ZZ625CTH.js";import{Aa as _,Da as y,Ja as v,Ka as x,L as k,La as O,Ma as u,Na as f,Oa as d,Pa as a,Q as c,Qa as o,Va as m,Wa as B,Xa as p,Ya as C,Za as $,_a as E,n as b,na as s,w as r}from"./chunk-QJJFUPYE.js";var h=class t{http=c(j);apiBase="/api";queryObjects(e){return this.http.post(`${this.apiBase}/query_objects`,e).pipe(r(this.handleError("queryObjects")))}queryCopies(e){return this.http.post(`${this.apiBase}/query_copies`,e).pipe(r(this.handleError("queryCopies")))}queryWorks(e){return this.http.post(`${this.apiBase}/query_works`,e).pipe(r(this.handleError("queryWorks")))}getObject(e){return this.http.get(`${this.apiBase}/object/${e}`).pipe(r(this.handleError("getObject")))}getCopy(e){return this.http.get(`${this.apiBase}/copy/${e}`).pipe(r(this.handleError("getCopy")))}getCopyObjects(e){return this.http.get(`${this.apiBase}/copy/${e}/objects`).pipe(r(this.handleError("getCopyObjects")))}getWork(e){return this.http.get(`${this.apiBase}/work/${e}`).pipe(r(this.handleError("getWork")))}getWorkCopies(e){return this.http.get(`${this.apiBase}/work/${e}/copies`).pipe(r(this.handleError("getWorkCopies")))}getExhibit(e){return this.http.get(`${this.apiBase}/exhibit/${e}`).pipe(r(this.handleError("getExhibit")))}getPreview(e){return this.http.get(`${this.apiBase}/preview/${e}`).pipe(r(this.handleError("getPreview")))}getFeaturedWorks(){return this.http.get(`${this.apiBase}/featured`).pipe(r(this.handleError("getFeaturedWorks")))}getRelatedObjects(e,i){return this.http.get(`${this.apiBase}/object/${e}/related/${i}`).pipe(r(this.handleError("getRelatedObjects")))}handleError(e){return i=>(console.error(`${e} failed:`,i),b(()=>new Error(`${e} failed: ${i.message||i}`)))}static \u0275fac=function(i){return new(i||t)};static \u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})};var T=()=>[1,2,3,4,5,6],D=t=>["/work",t],q=(t,e)=>e.bad_id;function H(t,e){if(t&1&&(a(0,"div",7)(1,"h3"),p(2),o(),a(3,"a",8),p(4,"View Work"),o()()),t&2){let i=m().$implicit;s(2),C(i.title),s(),d("routerLink",E(2,D,i.bad_id))}}function P(t,e){if(t&1&&v(0,H,5,4,"div",7),t&2){let i=e.$implicit,n=m().$implicit;x(i.column===n?0:-1)}}function L(t,e){if(t&1&&(a(0,"div",6),u(1,P,1,1,null,null,q),o()),t&2){let i=e.$implicit,n=m(2);B("top",n.columns[i].topOffset),s(),f(n.featuredWorks)}}function M(t,e){t&1&&(a(0,"div",3)(1,"h2"),p(2,"Featured Works"),o(),a(3,"div",4),u(4,L,3,2,"div",5,O),o()()),t&2&&(s(4),f($(0,T)))}function R(t,e){t&1&&(a(0,"div",9)(1,"p"),p(2,"Loading featured works..."),o()())}var F=class t{blakeData=c(h);featuredWorks=[];columns={1:{topOffset:"-90px"},2:{topOffset:"-20px"},3:{topOffset:"-90px"},4:{topOffset:"-20px"},5:{topOffset:"-90px"},6:{topOffset:"-20px"}};ngOnInit(){this.loadFeaturedWorks()}loadFeaturedWorks(){this.blakeData.getFeaturedWorks().subscribe({next:e=>{let i=0,n=1,g=[];e.forEach(l=>{l.title==="Laoco\xC3\xB6n"&&(l.title="Laoco\xF6n"),g.includes(l.bad_id)||(g.push(l.bad_id),l.column=n,++i===3&&(++n,i=0))}),this.featuredWorks=e},error:e=>{console.error("Failed to load featured works:",e)}})}onScroll(e){this.columns[1].topOffset=`${-90-e*.2}px`,this.columns[2].topOffset=`${-20-e*.4}px`,this.columns[3].topOffset=`${-90-e*.14}px`,this.columns[4].topOffset=`${-20-e*.4}px`,this.columns[5].topOffset=`${-90-e*.5}px`,this.columns[6].topOffset=`${-20-e*.3}px`}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=_({type:t,selectors:[["app-home"]],decls:5,vars:2,consts:[[1,"home-container"],["class","featured-works",4,"ngIf"],["class","loading",4,"ngIf"],[1,"featured-works"],[1,"columns-container"],[1,"column",3,"top"],[1,"column"],[1,"featured-work-card"],[3,"routerLink"],[1,"loading"]],template:function(i,n){i&1&&(a(0,"div",0)(1,"h1"),p(2,"William Blake Archive"),o(),y(3,M,6,1,"div",1)(4,R,3,0,"div",2),o()),i&2&&(s(3),d("ngIf",n.featuredWorks.length>0),s(),d("ngIf",n.featuredWorks.length===0))},dependencies:[W,w,I],encapsulation:2})};export{F as HomeComponent};
